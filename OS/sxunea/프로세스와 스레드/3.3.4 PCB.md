# 3.3.4 PCB
PCB는 운영체제에서 프로세스에 대한 메타 데이터를 저장한 데이터를 말하며, 프로세스 제어 블록이라고도 한다. 프로세스가 생성되면, 운영체제는 해당 PCB를 생성한다. 

프로그램이 실행되면 **프로세스가 생성**되고, 프로세스 주소 값들에 앞서 설명한 스택, 힙 등의 구조를 기반으로 **메모리가 할당**된다. 그리고 이 프로세스의 **메타 데이터들이 PCB에 저장되어 관리**된다. 이는 프로세스의 중요한 정보들을 포함하므로 일반 사용자가 접근할 수 없도록 커널 앞부분에서 관리된다

## 메타데이터
메타데이터(Metadata)는 일반적으로 **데이터에 관한 구조화된 데이터**로, 대량의 정보 가운데에서 확인하고자 하는 정보를 효율적으로 검색하기 위해 원시데이터(Raw data)를 일정한 규칙에 따라 구조화 혹은 표준화한 정보를 의미한다

## PCB의 구조

PCB는 특정 프로세스 정보를 저장하는 데이터 블록이나 레코드로, 작업 제어 블록(TCB)라고도 한다. 프로세스가 생성되면 PCB도 생성되고, 종료되면 마찬가지로 삭제된다.

### 프로세스 스케줄링 상태
- 프로세스의 우선 순위, 스케줄링 큐의 포인터, 기타 스케줄 매개변수

### 프로세스 식별자
- 프로세스 ID와 같은 고유 식별자

### 프로세스 권한
- 컴퓨터 자원 또는 I/O 디바이스에 대한 권한 정보 

### 프로그램 카운터
- 프로세스를 실행하는 다음 명령으 주소에 대한 포인터

### CPU 레지스터
- 프로세스를 실행하기 위해 저장해야 할 레지스터에 대한 정보

### CPU 스케줄링 정보
- 프로세스의 우선순위, 스케줄링 큐의 포인터, 기타 스케줄 매개변수

### 계정 정보
- 프로세서(CPU) 사용시간, 실제 사용 시간, 프로세스 번호, 실행한 유저의 정보 등

### I/O 상태 정보
- 입출력 요구 프로세스에 할당된 입출력 장치, 열린 파일 리스트 등
- 프로세스에 할당된 I/O 디바이스 목록

## 컨텍스트 스위칭(문맥 교환)
**문맥 교환**은 CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 것이다. 또, 두 프로세스의 프로세스 제어 블록(PCB)을 교환하는 작업이다

한 프로세스에 **할당된 시간이 끝**나거나 **인터럽트**에 의해 발생한다. 컴퓨터는 많은 프로그램을 동시에 실행하는 것처럼 보이지만 어떠한 시점에서 실행되고 있는 프로세스는 단 한개이며, 많은 프로세스가 동시에 구동되는 것처럼 보이는 것은 다른 프로세스와의 문맥 교환이 아주 빠르게 실행되기 때문이다

![image](https://github.com/sxunea/CS-Study/assets/81434152/a1864fb7-90ff-43e2-8a02-0178a512e4cf)

프로세스 A가 실행되다 멈추고, A의 PCB를 저장하고 다시 프로세스 B를 로드해 실행된다. 다시 프로세스 B의 PCB를 저장하고 A의 PCB를 로드한다. 

