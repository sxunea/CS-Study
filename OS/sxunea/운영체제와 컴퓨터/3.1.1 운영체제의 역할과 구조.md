# 3.1.1 운영체제의 역할과 구조


## 컴퓨터 시스템의 구성
![Untitled](https://github.com/sxunea/CS-Study/assets/81434152/1efa49e7-5cb2-48ea-bc28-d3d938de7c02)

## 컴퓨터 하드웨어의 구성



**컴퓨터 시스템**은 크게 사용자, 하드웨어와 소프트웨어로 구성되는데, 이때 운영체제는 이 하드웨어를 관리하고, 하드웨어와 소프트웨어, 사용자를 매개하는 프로그램이다. 

**하드웨어는 위와 같이 프로세서(CPU), 메모리, 주변 장치로 구성되고, 이들은 시스템 버스로 연결된다**


![1Untitled](https://github.com/sxunea/CS-Study/assets/81434152/42b438a2-211e-40a8-bcc3-7f762a17e441)

## 프로세서 (CPU)


프로세스는 하드웨어에 부착된 모든 장치의 동작을 제어하고 명령을 실행한다. 이는 **레지스터, 연산장치(ALU), 제어 장치(CU)** 로 구성되어있고, 시스템 버스로 연결된다. 

![Un2titled](https://github.com/sxunea/CS-Study/assets/81434152/3ed3c911-869e-4271-8be5-519209290c43)

## 메모리


메모리는 프로그램, 데이터 등을 저장하는 장치이다. **주 기억장치(메인 메모리)와 보조 기억 장치**로 나뉘며, 이때 메모리는 속도가 빠르면 비용이 비싸서 메모리 계층구조를 활용해 이를 보완한다. 이를 이용해 불필요한 프로그램과 데이터는 보조 기억 장치에 저장했다가 실행, 참조할 때만 메인 메모리로 옮긴다

## 메모리 계층 구조


![Un3titled](https://github.com/sxunea/CS-Study/assets/81434152/5f9bb189-8170-40b6-9a4c-ee6594babdc9)

### 레지스터

**프로세서 내부**에 있으며, 프로세서가 사용할 데이터를 보관하는 **가장 빠른** 메모리이다. 

### 캐시

프로세서 내부나 외부에 있으며, 프로세서는 속도가 빠르고 메인 메모리는 느려서 이 속도 차이를 보완하기 위해 만든 고속 버퍼이다. 

메인메모리와 크기가 동일한 블록 여러개로 구성되는데, 보통 8~64바이트 크기의 블록으로 구성된다.


**캐시의 동작**
- 캐시는 주소 영역을 한번 읽어들일 수 있는 크기로 나눈 후 각 블록에 번호를 부여해 이 번호를 태그로 저장한다. 이때 프로세서는 메인 메모리에 접근하기 전에 캐시에 해당 주소의 자료가 있는지 먼저 확인한다.
- 캐시는 메인 메모리에서 데이터를 블록 단위로 가져와 프로세서에 워드 단위로 전달해 속도를 높인다. 그리고 데이터가 이동하는 통료(대역폭)을 확대해 프로세서와 메모리의 속도차를 줄인다.

- 따라서 프로세서가 메인 메모리에 접근하기 전에 원하는 주소의 자료가 있는지 캐시에서 먼저 확인하는 식으로 속도를 보완한다. 이때 캐시의 성능을 높이기 위해 블럭의 크기를 무작정 높이면 히트율은 늘어날 수 있지만, 전송 부담과 데이터 교체 작업이 자주 일어나므로 부하가 커서 어렵다

**캐시의 성능**
- 캐시의 성능은 작은 용량의 캐시에 프로세서가 이후 참조할 정보가 얼마나 들어있느냐로 좌우된다
    - 캐시 히트 : 프로세서가 참조할 정보 있을 때
    - 캐시 미스 : 프로세서가 참조할 정보 없을 때

- 캐시의 블록의 크기는 캐시의 성능으로 좌우된다
    - 공간적 지역성 : 대부분의 프로그램이 참조한 주소와 인접한 주소의 내용을 다시 참조하는 특성
    - 시간적 지역성 : 한번 참조한 주소를 곧 다시 참조하는 특성

- 지역성은 블록의 크면 캐시의 히트율이 올라갈 수 있음을 의미하지만, 블록이 커지면 전송 부담 및 캐시 데이터 교체 작업이 자주 일어나므로 캐시의 크기를 무작정 늘릴 수도 없다

### 메인 메모리

프로세서 외부에 있으며, 프로세서에서 즉시 수행할 프로그램과 데이터를 저장하거나 작업한 결과를 저장하는 역할을 한다. 메모리는 셀로 구성되어 있는데, 비트라면 주소 범위는 2^n-1로 이루어져 있다. 메인 메모리는 프로세서와 보조 기억 장치 사이에 있으며, 이 사이에서 발생하는 디스크 I/O 병목 현상 해결 역할 또한 한다. 

프로세서와 메인 메모리 간에 속도 차이가 나면서 메인 메모리의 부담을 줄이려고 프로세서 내부나 외부에 위의 캐시를 구현하기도 한다.

메모리 속도
- 메모리 접근 시간
    - 명령이 발생한 후 목표 주소를 검색해 데이터 쓰기/읽기를 시작할때까지 걸린 시간
- 메모리 사이클 시간
    - 두 번의 연속적인 메모리 동작 사이에 필요한 최소 지연시간

### 보조 기억 장치

주변 장치 중 프로그램과 데이터를 저장하는 하드웨어로, 자기 디스크, 광 디스크, 자기 테이프 등이 해당한다.

<br>

## 시스템 버스



시스템 버스는 하드웨어를 물리적으로 연결해 서로 데이터를 주고 받을 수 있게 하는 통로로, 다양한 신호를 전달한다. 

- 데이터 버스
    - 프로세서와 메인 메모리, 주변 장치 사이에서 데이터를 전송한다. 데이터 버스를 구성하는 배선 수는 프로세서가 한번에 전송할 수 있는 비트 수를 결정하는데, 이를 워드라고 한다

- 주소 버스
    - 프로세서가 시스템의 구성 요소를 식별하는 주소, 정보를 전송한다. 주소 버스를 구성하는 배선 수는 프로세서와 접속할 수 있는 메인 메모리의 최대 용량을 결정한다.

- 제어 버스
    - 프로세서가 시스템의 구성 요소를 제어하는데 사용한다. 제어 신호로 연산 장치의 종류와 메인 메모리의 읽기/쓰기 동작을 결정한다.

## 주변 장치

주변 장치는 메인메모리와 프로세서를 제외한 나머지 하드웨어 구성요소로, 단순히 입출력 장치라고도 한다.

- 입력 장치
- 출력 장치
- 저장 장치
